# エリオット波動EA テスト計画

## 1. テスト概要

### 目的
最適化されたエリオット波動EAの動作を検証し、本番運用前に潜在的な問題を特定・解決する。

### テスト環境
- **プラットフォーム**: MetaTrader 5
- **口座タイプ**: Micro口座（0.01ロット対応）
- **テストモード**: ストラテジーテスター（バックテスト）→ デモ口座 → 少額リアル口座

---

## 2. Phase 1: バックテスト（期間: 1週間）

### 2.1 基本バックテスト

#### 設定
```
期間: 2024-01-01 ～ 2024-06-30 (6ヶ月)
通貨ペア: USDJPY
タイムフレーム: H4 (Monitor), M5 (Execute)
初期証拠金: $10,000
レバレッジ: 1:100
スプレッド: 3 pips (固定)
モデリング: Every tick based on real ticks
最適化: なし（まず基本動作確認）
```

#### 評価指標
| 指標 | 目標値 | 許容範囲 | 不合格 |
|-----|--------|---------|-------|
| 勝率 | 55%以上 | 50-55% | 50%未満 |
| Profit Factor | 1.8以上 | 1.5-1.8 | 1.5未満 |
| 最大ドローダウン | 15%以下 | 15-20% | 20%超 |
| 総トレード数 | 50-150回 | 30-200回 | 30回未満または200回超 |
| 平均利益/損失比 | 2.5以上 | 2.0-2.5 | 2.0未満 |
| 最大連続負け | 5回以下 | 5-7回 | 7回超 |
| シャープレシオ | 1.5以上 | 1.0-1.5 | 1.0未満 |

#### チェックリスト
- [ ] コンパイルエラーなし
- [ ] ランタイムエラーなし
- [ ] Wave 1検出回数を記録
- [ ] Wave 2検出回数を記録
- [ ] Wave 3エントリー回数を記録
- [ ] SL/TP設定が適切か確認
- [ ] ログに異常がないか確認

### 2.2 複数通貨ペアテスト

#### 設定
```
通貨ペア:
- USDJPY (基準)
- EURJPY
- GBPJPY
- AUDJPY
- CADJPY

その他設定は2.1と同じ
```

#### 評価
各通貨ペアで基本バックテストの目標値を満たすか確認

#### チェックリスト
- [ ] 全通貨ペアでコンパイル成功
- [ ] 各通貨ペアの特性に応じた動作確認
- [ ] スプレッドの影響を考慮
- [ ] 相関の高いペアでの同時エントリーを確認

### 2.3 パラメータ最適化テスト

#### 最適化パラメータ
```
MinWaveSize: 0.300, 0.400, 0.500, 0.600
MinADXForTrend: 20, 25, 30
ATRMultiplier: 1.0, 1.5, 2.0
RiskRewardRatio: 2.5, 3.0, 3.5
```

#### 最適化基準
- **最大化**: Profit Factor
- **制約条件**:
  - 最大DD < 20%
  - 総トレード数 > 30回
  - 勝率 > 45%

#### チェックリスト
- [ ] 最適パラメータセットを特定
- [ ] オーバーフィッティングの兆候を確認
- [ ] 複数の通貨ペアで安定性を確認
- [ ] フォワードテスト用パラメータを決定

---

## 3. Phase 2: デモ口座テスト（期間: 4週間）

### 3.1 デモ口座設定

#### 口座仕様
```
口座タイプ: デモ Micro
初期証拠金: $10,000
レバレッジ: 1:100
通貨ペア: USDJPY (まず1ペアで検証)
スプレッド: 変動（リアルに近い環境）
```

#### EA設定
```
TimeframeMonitor: H4
TimeframeExecute: M5
RiskPercentAligned: 0.01
UseMarketEnvironmentFilter: true
UseDynamicPositionSizing: true
CollectTradeData: true
```

### 3.2 Week 1: 基本動作確認

#### 目標
- [ ] EAが正常に起動
- [ ] Wave検出が正常に動作
- [ ] エントリー・エグジットが正常
- [ ] ログが正常に記録

#### 毎日チェック
- 朝: ポジション状況確認
- 夕: トレードログ確認
- 夜: Wave検出ログ確認

#### Week 1終了時レビュー
```
確認項目:
- トレード回数（目標: 2-5回）
- 勝率（目標: 50%以上）
- SL/TPが適切に設定されているか
- ログに異常がないか
```

### 3.3 Week 2-3: 安定性検証

#### 目標
- [ ] 連続2週間エラーなし
- [ ] 週次勝率が安定（45-60%）
- [ ] ドローダウンが許容範囲内（<15%）
- [ ] 市場環境フィルターが機能

#### 週次チェック
```
Week 2終了時:
- 総トレード数: ?
- 勝率: ?%
- PF: ?
- 最大DD: ?%
- 異常な動作: なし/あり（内容: ）

Week 3終了時:
- 総トレード数: ?
- 勝率: ?%
- PF: ?
- 最大DD: ?%
- 異常な動作: なし/あり（内容: ）
```

### 3.4 Week 4: ストレステスト

#### テスト内容
1. **高ボラティリティ時の動作**
   - 重要経済指標発表時（雇用統計など）
   - 市場急変時の対応

2. **ネットワーク障害シミュレーション**
   - VPSの一時停止
   - MT5の再起動

3. **複数通貨ペア同時運用**
   - USDJPY + EURJPY を同時稼働
   - ポジション数制限の動作確認

#### チェックリスト
- [ ] 高ボラ時にエントリー回避できたか
- [ ] 再起動後の復旧が正常か
- [ ] 複数ペアで同時ポジション制限が機能したか

---

## 4. Phase 3: 少額リアル口座テスト（期間: 8週間）

### 4.1 リアル口座設定

#### 口座仕様
```
口座タイプ: リアル Micro
初期証拠金: $500（少額でリスク限定）
レバレッジ: 1:100
通貨ペア: USDJPY
```

#### EA設定（デモと同じ）
```
RiskPercentAligned: 0.01
RiskPercentUnaligned: 0.005
UseDynamicPositionSizing: true
```

### 4.2 Week 1-4: 慎重な運用

#### 目標
- [ ] リアル環境での正常動作確認
- [ ] スリッページの影響評価
- [ ] 実スプレッドでの収益性確認

#### 週次レポート
```
Week X:
日付: 2025-XX-XX ～ 2025-XX-XX
開始残高: $XXX
終了残高: $XXX
損益: +/-$XX (+/-X%)
トレード数: X回
勝率: XX%
最大DD: XX%
コメント:
```

### 4.3 Week 5-8: パフォーマンス評価

#### 評価基準
```
4週間の成績:
- 月間収益率: 目標 +5%以上、許容 +2-5%、不合格 マイナス
- 月間最大DD: 目標 10%以下、許容 10-15%、不合格 15%超
- 月間PF: 目標 1.8以上、許容 1.5-1.8、不合格 1.5未満
- 総トレード数: 目標 10-30回、許容 5-40回
```

#### 合格条件
以下すべてを満たす場合、本番運用へ移行可能:
- [ ] 8週間でプラス収支
- [ ] 最大DDが15%以内
- [ ] PFが1.5以上
- [ ] 重大なエラーなし
- [ ] ログに異常なし

---

## 5. Phase 4: 本番運用（継続）

### 5.1 段階的な資金投入

#### Week 1-4: $1,000
```
リスク設定: 控えめ
RiskPercentAligned: 0.01
RiskPercentUnaligned: 0.005
```

#### Week 5-8: $2,000（成績良好な場合）
```
リスク設定: 同じ
```

#### Week 9-12: $5,000（さらに成績良好な場合）
```
リスク設定: やや積極的
RiskPercentAligned: 0.015
```

### 5.2 継続的モニタリング

#### 毎日
- [ ] ポジション状況確認
- [ ] 異常なログがないか確認

#### 毎週
- [ ] 週次収益率計算
- [ ] 最大DDの確認
- [ ] パラメータ調整の要否判断

#### 毎月
- [ ] 月次レポート作成
- [ ] バックテストとの比較
- [ ] パラメータの最適化検討
- [ ] MLモデルの再学習

---

## 6. テスト記録フォーマット

### バックテストレポート
```
===========================================
バックテストレポート
===========================================
テスト日: 2025-XX-XX
通貨ペア: USDJPY
期間: 2024-01-01 ～ 2024-06-30

【パラメータ】
MinWaveSize: 0.500
MinADXForTrend: 25.0
ATRMultiplier: 1.5
RiskRewardRatio: 3.0

【結果】
初期証拠金: $10,000
最終残高: $XX,XXX
純利益: $X,XXX (+XX.X%)
総トレード数: XXX回
勝ちトレード: XX回 (XX%)
負けトレード: XX回 (XX%)
Profit Factor: X.XX
最大ドローダウン: XX.X% ($XXX)
平均利益: $XXX
平均損失: $XXX
平均利益/損失比: X.XX
最大連続勝ち: XX回
最大連続負け: XX回
シャープレシオ: X.XX

【Wave検出統計】
Wave 1検出: XX回
Wave 2検出: XX回
Wave 3エントリー: XX回
Wave 3成功率: XX%

【評価】
✅ 合格 / ❌ 不合格 / ⚠️ 要改善

【コメント】


===========================================
```

### デモ/リアル口座週次レポート
```
===========================================
週次トレーディングレポート
===========================================
口座タイプ: デモ / リアル
Week: X (2025-XX-XX ～ 2025-XX-XX)

【残高推移】
開始残高: $XXX
終了残高: $XXX
損益: +/-$XX (+/-X.X%)

【トレード統計】
総トレード数: X回
勝ちトレード: X回 (XX%)
負けトレード: X回 (XX%)
平均利益: $XX
平均損失: $XX
最大利益: $XX
最大損失: $XX
PF: X.XX

【リスク管理】
最大DD: XX.X% ($XX)
使用証拠金最大: $XXX (XX%)

【主要トレード】
1. 日時: 2025-XX-XX XX:XX
   タイプ: Buy/Sell
   Wave: Wave 3
   Entry: XXX.XXX
   SL: XXX.XXX
   TP: XXX.XXX
   結果: +/-$XX

2. ...

【注意事項/問題点】
-
-

【次週のアクション】
-
-

===========================================
```

---

## 7. トラブル発生時の対応

### レベル1: 軽微な問題（勝率一時的に低下など）
- パラメータの微調整
- 1週間様子見

### レベル2: 中程度の問題（DD 15%超など）
- EAを一時停止
- ログ詳細分析
- パラメータの大幅見直し
- バックテスト再実行

### レベル3: 重大な問題（DD 20%超、システムエラーなど）
- EAを即座に停止
- 問題の根本原因分析
- コードの修正
- Phase 1から再テスト

---

## 8. 成功基準（最終評価）

リアル口座テスト8週間終了後、以下の基準をすべて満たす場合、本格運用へ:

### 必須条件
- [ ] 8週間でプラス収支（+5%以上推奨）
- [ ] 最大DD 15%以内
- [ ] Profit Factor 1.5以上
- [ ] 重大なエラーなし
- [ ] 月次勝率 45%以上

### 推奨条件
- [ ] 月間収益率 +10%以上
- [ ] 最大DD 10%以内
- [ ] Profit Factor 2.0以上
- [ ] 勝率 55%以上
- [ ] シャープレシオ 1.5以上

---

最終更新: 2025-11-09
